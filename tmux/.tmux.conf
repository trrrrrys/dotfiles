set-option -g default-shell /bin/zsh

# plugin
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-battery'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-resurrect-auto'
set -g @plugin 'Morantron/tmux-fingers'


run -b '~/.tmux/plugins/tpm/tpm'
# tmuxã‚’256è‰²è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
set-option -g default-terminal screen-256color
set -g terminal-overrides 'xterm:colors=256'

set -g escape-time 0
# prefix
set -g prefix C-s

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒã‚¤ãƒ³ãƒ‰è§£é™¤
unbind C-b

# ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ãŸéš›ã«windowç•ªå·ã‚’æ¡ç•ªã™ã‚‹.
set-option -g renumber-windows on

# windowã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
# bind c new-window -c '#{pane_current_path}'
bind c new-window -c '~'

# pane
## prefix + qã®æ™‚é–“ã‚’é•·ãã™ã‚‹
set -g display-panes-time 10000

setw -g pane-base-index 1


# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
set-option -g status-position bottom
set-option -g status-left-length 90
set-option -g status-right-length 90

# nç§’ã”ã¨ã«statusæ›´æ–°
set-option -g status-interval 5

# #S: ã‚»ãƒƒã‚·ãƒ§ãƒ³åç§°
# #I: Windowç•ªå·
# #P: paneç•ªå·
set-option -g status-left  "#[bg=colour148]#[fg=colour234] #S: #I.#P "

# set -g pane-border-style fg="colour235",bg="colour234"
set -g pane-border-style fg="colour234",bg="colour234"
set -g pane-active-border-style bg="colour234",fg="colour172"
set -g status-position bottom
set -g status-justify left
set -g status-bg colour235

setw -g window-status-current-style bg="colour239"
setw -g window-status-current-format '\
#[fg=colour239]#[bg=colour234]î‚¶#[bg=colour239]#[fg=colour119]\
#I#[fg=colour249]:#[fg=colour255]#W#[fg=colour249]\
#F ğŸ¹#[fg=colour239]#[bg=colour234]î‚´'

setw -g window-status-style fg="colour244",bg="colour234"

setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '

set-option -g status-right "#[fg=colour236]î‚¶#[fg=colour253]#[bg=colour236]\
Conteiners: #(echo $(docker ps -q | wc -l))#[fg=colour238]î‚¶#[fg=colour254]#[bg=colour238]\
CPU: #{cpu_percentage}#[fg=colour238]î‚¶#[fg=colour254]#[bg=colour238]\
Mem: #(sh ~/.tmux/mem_percentage.sh)%%#[fg=colour254] #[fg=colour240]î‚¶#[fg=colour255]#[bg=colour240]\
%Y/%m/%d(%a) %H:%M "

# key bind

# paneç§»å‹•
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
# pane resize
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5


# æ¨ªåˆ†å‰²
bind | split-window -h -c '#{pane_current_path}'

# ç¸¦åˆ†å‰²
bind - split-window -v -c '#{pane_current_path}'

# window index ã®é–‹å§‹å€¤
set-option -g base-index 1

# ãƒã‚¦ã‚¹æ“ä½œã‚’æœ‰åŠ¹ã«ã™ã‚‹
# set-option -g mouse on
set-option -g mouse off
# bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e'"

# ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰
# vimã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’ä½¿ã†
setw -g mode-keys vi

bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi V send -X select-line
# çŸ©å½¢é¸æŠ
bind -T copy-mode-vi C-v send -X rectangle-toggle
bind -T copy-mode-vi y send -X copy-selection-and-cancel
bind -T copy-mode-vi Y send -X copy-line
bind -T copy-mode-vi : send -X jump-again
bind -T copy-mode-vi C-h send -X start-of-line
bind -T copy-mode-vi C-l send -X end-of-line
bind -T copy-mode-vi Escape send -X cancel
# paste

# tmux-resurrecr
set -g @resurrect-strategy-vim 'session'
# set -g @resurrect-processes ''
