# å…¨è§£é™¤
unbind -a
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒã‚¤ãƒ³ãƒ‰
# bind-key C-b send-prefix
# bind-key C-o rotate-window
bind-key C-z suspend-client
# bind-key Space next-layout
bind-key ! break-pane # current pane ã‚’æ–°ã—ã„windowã§é–‹ã
# bind-key '"' split-window # paneç¸¦åˆ†å‰²
bind-key '#' list-buffers
bind-key '$' command-prompt -I "#S" "rename-session '%%'" # session åå¤‰æ›´
# bind-key % split-window -h # pane æ¨ªåˆ†å‰²
bind-key & confirm-before -p "kill-window #W? (y/n)" kill-window # windowå‰Šé™¤
bind-key "'" command-prompt -p index "select-window -t ':%%'" # windowã®indexã‚’æŒ‡å®šã—ã¦ç§»å‹•
bind-key ( switch-client -p # ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆ
bind-key ) switch-client -n # ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆ
bind-key , command-prompt -I "#W" "rename-window '%%'" # windowåå¤‰æ›´
# bind-key - delete-buffer # delete buffer
bind-key . command-prompt "move-window -t '%%'" # windowç§»å‹•
bind-key 0 select-window -t :0 # window0ã«ç§»å‹•
bind-key 1 select-window -t :1 # window1ã«ç§»å‹•
bind-key 2 select-window -t :2 # window2ã«ç§»å‹•
bind-key 3 select-window -t :3 # window3ã«ç§»å‹•
bind-key 4 select-window -t :4 # window4ã«ç§»å‹•
bind-key 5 select-window -t :5 # window5ã«ç§»å‹•
bind-key 6 select-window -t :6 # window6ã«ç§»å‹•
bind-key 7 select-window -t :7 # window7ã«ç§»å‹•
bind-key 8 select-window -t :8 # window8ã«ç§»å‹•
bind-key 9 select-window -t :9 # window9ã«ç§»å‹•
bind-key : command-prompt
# bind-key \ last-pane
bind-key = choose-buffer
bind-key ? list-keys
bind-key D choose-client
bind-key L switch-client -l
bind-key [ copy-mode
bind-key ] paste-buffer
bind-key c new-window
bind-key d detach-client
# bind-key f command-prompt "find-window '%%'"
bind-key i display-message
bind-key l last-window
bind-key c-l clear-history
bind-key m select-pane -m
bind-key n next-window
# bind-key o select-pane -t :.+
bind-key p previous-window
bind-key q display-panes
bind-key r refresh-client
bind-key s choose-session
bind-key t clock-mode
bind-key w choose-window
bind-key x confirm-before -p "kill-pane #P? (y/n)" kill-pane
bind-key z resize-pane -Z
bind-key '{' swap-pane -U
bind-key '}' swap-pane -D
bind-key '~' show-messages
bind-key PPage copy-mode -u
bind-key -r Up select-pane -U
bind-key -r Down select-pane -D
bind-key -r Left select-pane -L
bind-key -r Right select-pane -R
bind-key -r M-1 select-layout even-horizontal
bind-key -r M-2 select-layout even-vertical
bind-key -r M-3 select-layout main-horizontal
bind-key -r M-4 select-layout main-vertical
bind-key -r M-5 select-layout tiled
bind-key -r M-n next-window -a
bind-key -r M-o rotate-window -D
bind-key -r M-p previous-window -a
bind-key -r M-Up resize-pane -U 5
bind-key -r M-Down resize-pane -D 5
bind-key -r M-Left resize-pane -L 5
bind-key -r M-Right resize-pane -R 5
bind-key -r C-Up resize-pane -U
bind-key -r C-Down resize-pane -D
bind-key -r C-Left resize-pane -L
bind-key -r C-Right resize-pane -R

set-option -g default-shell /bin/zsh


# plugin
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-battery'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
# set -g @plugin 'Morantron/tmux-fingers'
# set -g @plugin 'fcsonline/tmux-thumbs'

run -b '~/.tmux/plugins/tpm/tpm'

# tmux-resurrect
set -g @resurrect-save 'S'

# run '~/ghq/github.com/trrrrrys/tmux-custom-pane-layouts/tmux-custom-pane-layouts.tmux'
# tmuxã‚’256è‰²è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
set-option -g default-terminal screen-256color
set -g terminal-overrides 'xterm:colors=256'

set -g escape-time 0
# prefix
set -g prefix C-s

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒã‚¤ãƒ³ãƒ‰è§£é™¤
unbind C-b

# ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ãŸéš›ã«windowç•ªå·ã‚’æ¡ç•ªã™ã‚‹.
set-option -g renumber-windows on

# windowã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
# bind c new-window -c '#{pane_current_path}'
bind c new-window -c '~'

# pane
## prefix + qã®æ™‚é–“ã‚’é•·ãã™ã‚‹
set -g display-panes-time 10000

setw -g pane-base-index 1


# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
set-option -g status-position bottom
set-option -g status-left-length 90
set-option -g status-right-length 90

# nç§’ã”ã¨ã«statusæ›´æ–°
set-option -g status-interval 5

# #S: ã‚»ãƒƒã‚·ãƒ§ãƒ³åç§°
# #I: Windowç•ªå·
# #P: paneç•ªå·
# #W:
# #F
# #
set-option -g status-left  "#[bg=colour148]#[fg=colour234] #S "

# window color
set -g window-style 'bg=colour234'
set -g window-active-style 'bg=colour0'
# pane color
set -g pane-border-style 'fg=colour234,bg=colour0'
set -g pane-active-border-style 'fg=colour0,bg=colour0'


set -g status-position bottom
set -g status-justify left
set -g status-bg colour234

setw -g window-status-current-style bg="colour239"
setw -g window-status-current-format '\
#[fg=colour239]#[bg=colour234] #[bg=colour239]#[fg=colour119]\
#I.#P#[fg=colour249]:#[fg=colour255]#W#[fg=colour249]\
#F #[fg=colour239]#[bg=colour234]'


# windowè¨­å®š
setw -g window-status-style fg="colour244",bg="colour234"
setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '
set-option -g status-right "\
#[fg=colour236] #[fg=colour253]#[bg=colour236]\
#(~/ghq/github.com/trrrrrys/prcount/main.ts --json id,title,url --review-requested=@me --archived=false --state=open --extra=org:dmm-com) \
ğŸ¤: #(osascript -e 'input volume of \(get volume settings\)') %% #[fg=colour238] #[fg=colour254]#[bg=colour238]\
Conteiners: #(echo $(docker ps -q | wc -l))#[fg=colour238] #[fg=colour254]#[bg=colour238]\
CPU: #{cpu_percentage}#[fg=colour238] #[fg=colour254]#[bg=colour238]\
Mem: #(sh ~/ghq/github.com/trrrrrys/dotfiles/scripts/mem.sh)%%#[fg=colour254] #[fg=colour240] #[fg=colour255]#[bg=colour240]\
ClaudeCode: $#(sh ~/ghq/github.com/trrrrrys/dotfiles/scripts/ccusage.sh) \
"

# key bind

# paneç§»å‹•
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
# pane resize
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5


# æ¨ªåˆ†å‰²
bind | split-window -h -c '#{pane_current_path}'

# ç¸¦åˆ†å‰²
bind - split-window -v -c '#{pane_current_path}'

# window index ã®é–‹å§‹å€¤
set-option -g base-index 1

# ãƒã‚¦ã‚¹æ“ä½œã‚’æœ‰åŠ¹ã«ã™ã‚‹
# set-option -g mouse on
set-option -g mouse off
# bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e'"

# ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰
# vimã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’ä½¿ã†
setw -g mode-keys vi

bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi V send -X select-line
# çŸ©å½¢é¸æŠ
bind -T copy-mode-vi C-v send -X rectangle-toggle
bind -T copy-mode-vi y send -X copy-selection-and-cancel
bind -T copy-mode-vi Y send -X copy-line
bind -T copy-mode-vi : send -X jump-again
bind -T copy-mode-vi C-h send -X start-of-line
bind -T copy-mode-vi C-l send -X end-of-line
bind -T copy-mode-vi Escape send -X cancel
# paste

# tmux-resurrecr
set -g @resurrect-strategy-vim 'session'
# set -g @resurrect-processes ''
